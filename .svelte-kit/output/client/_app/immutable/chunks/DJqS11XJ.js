import{i as xe,e as et,u as it,o as ct}from"./DVbwztoO.js";import{m as pt,e as ut}from"./B7Biw6Z9.js";import{s as dt,a as tt,y as ht}from"./DwmNbOaZ.js";import{S as ft,i as _t,d as p,o as Ee,n as te,s as q,a as c,q as lt,b as ae,c as e,D as vt,g as V,e as h,f as _,h as E,j as Fe,l as C,k as f,t as I,p as nt,v as mt,x as bt,r as at,y as gt,w as Pt}from"./FRm0aZRB.js";import{P as yt}from"./B-JAPqpS.js";import{p as Et}from"./Bud0zC47.js";function It({params:a,url:u}){const{id:l}=a,s=u.searchParams.get("cliente")||"Cliente",m=parseFloat(u.searchParams.get("presupuesto"));u.searchParams.get("zona");let o=xe.find(d=>d.public_id===l);if(o||(o=pt.find(d=>d.public_id===l)),!o)throw ut(404,"Propiedad no encontrada");const t=o.operations&&o.operations.length>0?o.operations[0].type:"sale",v=m||(o.operations&&o.operations.length>0?o.operations[0].amount:0),y=xe.filter(d=>!(d.public_id===o.public_id||(d.operations&&d.operations.length>0?d.operations[0].type:"")!==t||d.property_type!==o.property_type));y.sort((d,r)=>{const n=d.operations&&d.operations.length>0?d.operations[0].amount:0,k=r.operations&&r.operations.length>0?r.operations[0].amount:0;return Math.abs(n-v)-Math.abs(k-v)});const g=y.slice(0,6);return{anchorProperty:o,similarProperties:g,clientName:s}}const Nt=Object.freeze(Object.defineProperty({__proto__:null,load:It},Symbol.toStringTag,{value:"Module"}));function st(a,u,l){const s=a.slice();return s[8]=u[l],s}function rt(a){let u,l,s='<h2 class="svelte-8a24bn">Otras Oportunidades para Ti</h2> <p>Propiedades similares que podr√≠an interesarte</p> <div class="divider svelte-8a24bn"></div>',m,o,t=[],v=new Map,y,g=et(a[5]);const d=r=>r[8].public_id;for(let r=0;r<g.length;r+=1){let n=st(a,g,r),k=d(n);v.set(k,t[r]=ot(k,n))}return{c(){u=f("section"),l=f("div"),l.innerHTML=s,m=C(),o=f("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){u=h(r,"SECTION",{class:!0});var n=_(u);l=h(n,"DIV",{class:!0,"data-svelte-h":!0}),Fe(l)!=="svelte-ov637q"&&(l.innerHTML=s),m=V(n),o=h(n,"DIV",{class:!0});var k=_(o);for(let w=0;w<t.length;w+=1)t[w].l(k);k.forEach(p),n.forEach(p),this.h()},h(){c(l,"class","section-header svelte-8a24bn"),c(o,"class","properties-grid svelte-8a24bn"),c(u,"class","similar-section")},m(r,n){ae(r,u,n),e(u,l),e(u,m),e(u,o);for(let k=0;k<t.length;k+=1)t[k]&&t[k].m(o,null);y=!0},p(r,n){n&32&&(g=et(r[5]),nt(),t=it(t,n,d,1,r,g,v,o,ct,ot,null,st),lt())},i(r){if(!y){for(let n=0;n<g.length;n+=1)te(t[n]);y=!0}},o(r){for(let n=0;n<t.length;n+=1)Ee(t[n]);y=!1},d(r){r&&p(u);for(let n=0;n<t.length;n+=1)t[n].d()}}}function ot(a,u){let l,s,m,o;return s=new yt({props:{property:u[8]}}),{key:a,first:null,c(){l=at(),Pt(s.$$.fragment),m=C(),this.h()},l(t){l=at(),gt(s.$$.fragment,t),m=V(t),this.h()},h(){this.first=l},m(t,v){ae(t,l,v),bt(s,t,v),ae(t,m,v),o=!0},p(t,v){u=t;const y={};v&32&&(y.property=u[8]),s.$set(y)},i(t){o||(te(s.$$.fragment,t),o=!0)},o(t){Ee(s.$$.fragment,t),o=!1},d(t){t&&(p(l),p(m)),mt(s,t)}}}function Dt(a){let u,l,s,m,o,t,v,y,g,d,r,n,k="Preparamos esta selecci√≥n exclusiva basada en tu inter√©s.",w,N,O,R,Ge='<h2 class="svelte-8a24bn">Tu Inter√©s Principal</h2> <div class="divider svelte-8a24bn"></div>',Ie,z,A,T,se,re,De,G,oe,ke,S,J,X=a[0].title+"",le,Ve,B,Ce,Y=(typeof a[0].location=="object"?a[0].location.name:a[0].location)+"",ne,Se,H,L,Te,Z=a[0].bedrooms+"",ie,He,Me,U,Ne,$=a[0].bathrooms+"",ce,Oe,ze,F,Ae,x=(a[0].construction_size||a[0].lot_size)+"",pe,je,qe,K,ee=a[0].description?a[0].description.substring(0,200)+"...":"Sin descripci√≥n.",ue,we,Q,j,Re,de,Be,D;document.title=u="Propuesta para "+a[4]+" - MatchHome";let b=a[5].length>0&&rt(a);return{c(){l=C(),s=f("div"),m=f("header"),o=f("div"),t=f("div"),v=f("h1"),y=I("Hola, "),g=f("span"),d=I(a[4]),r=C(),n=f("p"),n.textContent=k,w=C(),N=f("div"),O=f("section"),R=f("div"),R.innerHTML=Ge,Ie=C(),z=f("div"),A=f("div"),T=f("img"),De=C(),G=f("div"),oe=I(a[2]),ke=C(),S=f("div"),J=f("h3"),le=I(X),Ve=C(),B=f("p"),Ce=I("üìç "),ne=I(Y),Se=C(),H=f("div"),L=f("span"),Te=I("üõè "),ie=I(Z),He=I(" Rec√°maras"),Me=C(),U=f("span"),Ne=I("üöø "),ce=I($),Oe=I(" Ba√±os"),ze=C(),F=f("span"),Ae=I("üìê "),pe=I(x),je=I(" m¬≤"),qe=C(),K=f("p"),ue=I(ee),we=C(),Q=f("div"),j=f("a"),Re=I("Ver Detalles"),Be=C(),b&&b.c(),this.h()},l(i){vt("svelte-1ionfu0",document.head).forEach(p),l=V(i),s=h(i,"DIV",{class:!0});var he=_(s);m=h(he,"HEADER",{class:!0});var Je=_(m);o=h(Je,"DIV",{class:!0});var Ke=_(o);t=h(Ke,"DIV",{class:!0});var fe=_(t);v=h(fe,"H1",{class:!0});var Le=_(v);y=E(Le,"Hola, "),g=h(Le,"SPAN",{class:!0});var Qe=_(g);d=E(Qe,a[4]),Qe.forEach(p),Le.forEach(p),r=V(fe),n=h(fe,"P",{class:!0,"data-svelte-h":!0}),Fe(n)!=="svelte-c2z3kf"&&(n.textContent=k),fe.forEach(p),Ke.forEach(p),Je.forEach(p),w=V(he),N=h(he,"DIV",{class:!0});var _e=_(N);O=h(_e,"SECTION",{class:!0});var ve=_(O);R=h(ve,"DIV",{class:!0,"data-svelte-h":!0}),Fe(R)!=="svelte-pgnboi"&&(R.innerHTML=Ge),Ie=V(ve),z=h(ve,"DIV",{class:!0});var me=_(z);A=h(me,"DIV",{class:!0});var be=_(A);T=h(be,"IMG",{src:!0,alt:!0,class:!0}),De=V(be),G=h(be,"DIV",{class:!0});var We=_(G);oe=E(We,a[2]),We.forEach(p),be.forEach(p),ke=V(me),S=h(me,"DIV",{class:!0});var M=_(S);J=h(M,"H3",{class:!0});var Xe=_(J);le=E(Xe,X),Xe.forEach(p),Ve=V(M),B=h(M,"P",{class:!0});var Ue=_(B);Ce=E(Ue,"üìç "),ne=E(Ue,Y),Ue.forEach(p),Se=V(M),H=h(M,"DIV",{class:!0});var W=_(H);L=h(W,"SPAN",{});var ge=_(L);Te=E(ge,"üõè "),ie=E(ge,Z),He=E(ge," Rec√°maras"),ge.forEach(p),Me=V(W),U=h(W,"SPAN",{});var Pe=_(U);Ne=E(Pe,"üöø "),ce=E(Pe,$),Oe=E(Pe," Ba√±os"),Pe.forEach(p),ze=V(W),F=h(W,"SPAN",{});var ye=_(F);Ae=E(ye,"üìê "),pe=E(ye,x),je=E(ye," m¬≤"),ye.forEach(p),W.forEach(p),qe=V(M),K=h(M,"P",{class:!0});var Ye=_(K);ue=E(Ye,ee),Ye.forEach(p),we=V(M),Q=h(M,"DIV",{class:!0});var Ze=_(Q);j=h(Ze,"A",{href:!0,class:!0});var $e=_(j);Re=E($e,"Ver Detalles"),$e.forEach(p),Ze.forEach(p),M.forEach(p),me.forEach(p),ve.forEach(p),Be=V(_e),b&&b.l(_e),_e.forEach(p),he.forEach(p),this.h()},h(){c(g,"class","highlight svelte-8a24bn"),c(v,"class","svelte-8a24bn"),c(n,"class","subtitle svelte-8a24bn"),c(t,"class","greeting-content svelte-8a24bn"),c(o,"class","container"),c(m,"class","proposal-header svelte-8a24bn"),c(R,"class","section-header svelte-8a24bn"),tt(T.src,se=a[3])||c(T,"src",se),c(T,"alt",re=a[0].title),c(T,"class","anchor-image svelte-8a24bn"),c(G,"class","anchor-price-tag svelte-8a24bn"),c(A,"class","anchor-image-container svelte-8a24bn"),c(J,"class","svelte-8a24bn"),c(B,"class","anchor-location svelte-8a24bn"),c(H,"class","anchor-features svelte-8a24bn"),c(K,"class","anchor-description svelte-8a24bn"),c(j,"href",de=`/property/${a[0].public_id}?backUrl=${encodeURIComponent(a[1])}&fromProposal=true`),c(j,"class","btn btn-secondary full-width svelte-8a24bn"),c(Q,"class","anchor-actions"),c(S,"class","anchor-details svelte-8a24bn"),c(z,"class","anchor-card svelte-8a24bn"),c(O,"class","anchor-section svelte-8a24bn"),c(N,"class","container"),c(s,"class","proposal-page svelte-8a24bn")},m(i,P){ae(i,l,P),ae(i,s,P),e(s,m),e(m,o),e(o,t),e(t,v),e(v,y),e(v,g),e(g,d),e(t,r),e(t,n),e(s,w),e(s,N),e(N,O),e(O,R),e(O,Ie),e(O,z),e(z,A),e(A,T),e(A,De),e(A,G),e(G,oe),e(z,ke),e(z,S),e(S,J),e(J,le),e(S,Ve),e(S,B),e(B,Ce),e(B,ne),e(S,Se),e(S,H),e(H,L),e(L,Te),e(L,ie),e(L,He),e(H,Me),e(H,U),e(U,Ne),e(U,ce),e(U,Oe),e(H,ze),e(H,F),e(F,Ae),e(F,pe),e(F,je),e(S,qe),e(S,K),e(K,ue),e(S,we),e(S,Q),e(Q,j),e(j,Re),e(N,Be),b&&b.m(N,null),D=!0},p(i,[P]){(!D||P&16)&&u!==(u="Propuesta para "+i[4]+" - MatchHome")&&(document.title=u),(!D||P&16)&&q(d,i[4]),(!D||P&8&&!tt(T.src,se=i[3]))&&c(T,"src",se),(!D||P&1&&re!==(re=i[0].title))&&c(T,"alt",re),(!D||P&4)&&q(oe,i[2]),(!D||P&1)&&X!==(X=i[0].title+"")&&q(le,X),(!D||P&1)&&Y!==(Y=(typeof i[0].location=="object"?i[0].location.name:i[0].location)+"")&&q(ne,Y),(!D||P&1)&&Z!==(Z=i[0].bedrooms+"")&&q(ie,Z),(!D||P&1)&&$!==($=i[0].bathrooms+"")&&q(ce,$),(!D||P&1)&&x!==(x=(i[0].construction_size||i[0].lot_size)+"")&&q(pe,x),(!D||P&1)&&ee!==(ee=i[0].description?i[0].description.substring(0,200)+"...":"Sin descripci√≥n.")&&q(ue,ee),(!D||P&3&&de!==(de=`/property/${i[0].public_id}?backUrl=${encodeURIComponent(i[1])}&fromProposal=true`))&&c(j,"href",de),i[5].length>0?b?(b.p(i,P),P&32&&te(b,1)):(b=rt(i),b.c(),te(b,1),b.m(N,null)):b&&(nt(),Ee(b,1,1,()=>{b=null}),lt())},i(i){D||(te(b),D=!0)},o(i){Ee(b),D=!1},d(i){i&&(p(l),p(s)),b&&b.d()}}}function kt(a,u,l){let s,m,o,t,v,y,g;ht(a,Et,r=>l(7,g=r));let{data:d}=u;return a.$$set=r=>{"data"in r&&l(6,d=r.data)},a.$$.update=()=>{var r;a.$$.dirty&64&&l(0,{anchorProperty:s,similarProperties:m,clientName:o}=d,s,(l(5,m),l(6,d)),(l(4,o),l(6,d))),a.$$.dirty&1&&l(3,t=s.title_image_full||s.title_image_thumb||s.property_images&&((r=s.property_images[0])==null?void 0:r.url)),a.$$.dirty&1&&l(2,v=s.operations&&s.operations.length>0?s.operations[0].formatted_amount||`${s.operations[0].amount} ${s.operations[0].currency}`:"Consultar Precio"),a.$$.dirty&128&&l(1,y=g.url.pathname+g.url.search)},[s,y,v,t,o,m,d,g]}class Ot extends ft{constructor(u){super(),_t(this,u,kt,Dt,dt,{data:6})}}export{Ot as component,Nt as universal};
